
<!-- saved from url=(0038)data:text/html, <html contenteditable> -->
<html contenteditable=""><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body><div><br></div><div><br></div><div><div class="entry" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">WebAssembly (wasm) allows code written in languages other than JavaScript to run on browsers. If you haven’t been paying attention, all the major browsers support wasm and&nbsp;<a href="https://caniuse.com/#feat=wasm" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">globally more than 90% of users</a>&nbsp;have browsers that can run wasm.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Since Rust compiles to wasm, is it possible to build SPAs (Single Page Applications) purely in Rust and without writing a single line of JavaScript? The short answer is YES! Read on to learn more or visit the&nbsp;<a href="https://rustmart-yew.netlify.app/" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">demo site</a>&nbsp;if you can’t contain your excitement!</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We’ll be building a simple ecommerce site called “RustMart” that will have 2 pages:</p><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">HomePage - list all the products that the customer can add to cart</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">ProductDetailPage - show the product details when a product card is clicked</li></ul><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/rust-wasm-yew-single-page-application-1.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 1476px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">I’m using this example as it tests the minimal set of capabilities required to build modern SPAs:</p><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Navigate between multiple pages without page reload</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Make network requests without page reload</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Ability to reuse UI components across multiple pages</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Update components in different layers of the UI hierarchy</li></ul><h2 id="Setup" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#Setup" class="headerlink" title="Setup" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>Setup</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Follow this&nbsp;<a href="https://www.rust-lang.org/tools/install" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">link</a>&nbsp;to install Rust if you haven’t done so already.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Install these Rust tools:</p><pre class=" language-shell" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-shell" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">$ cargo install wasm-pack          # Compile Rust to Wasm and generate JS interop code
$ cargo install cargo-make         # Task runner
$ cargo install simple-http-server # Simple server to serve assets</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Create a new project:</p><pre class=" language-shell" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-shell" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">$ cargo new --lib rustmart &amp;&amp; cd rustmart</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We’ll be using the&nbsp;<a href="https://yew.rs/" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Yew</code></a>&nbsp;library to build UI components. Let’s add this and wasm dependencies to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Cargo.toml</code>:</p><pre class=" language-toml" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-toml" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">[lib]
crate-type = ["cdylib", "rlib"]

[dependencies]
yew = "0.17"
wasm-bindgen = "0.2"</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Create a new file named&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Makefile.toml</code>&nbsp;and add this:</p><pre class=" language-toml" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-toml" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">[tasks.build]
command = "wasm-pack"
args = ["build", "--dev", "--target", "web", "--out-name", "wasm", "--out-dir", "./static"]
watch = { ignore_pattern = "static/*" }

[tasks.serve]
command = "simple-http-server"
args = ["-i", "./static/", "-p", "3000", "--nocache", "--try-file", "./static/index.html"]</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Start the build task:</p><pre class=" language-shell" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-shell" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">$ cargo make build</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">If you’re new to Rust, I’ve written some&nbsp;<a href="http://www.sheshbabu.com/tags/Rust-Beginners/" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">guides for beginners</a>&nbsp;which will help you follow this post better.</p><h2 id="Hello-World" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#Hello-World" class="headerlink" title="Hello World" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>Hello World</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s start with a simple “hello world” example:</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Create&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">static/index.html</code>&nbsp;and add this:</p><pre class=" language-html" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-html" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token doctype" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">&lt;!DOCTYPE html&gt;</span>
<span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>html</span> <span class="token attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">lang</span><span class="token attr-value" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span>en<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span></span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span>
  <span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>head</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span>
    <span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>meta</span> <span class="token attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">charset</span><span class="token attr-value" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span>utf-8<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span></span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/&gt;</span></span>
    <span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>title</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span>RustMart<span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;/</span>title</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span>
    <span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>script</span> <span class="token attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">type</span><span class="token attr-value" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span>module<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span></span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span><span class="token script language-javascript" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">
      <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">import</span> init <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">from</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"/wasm.js"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
      <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">init</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
    </span><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;/</span>script</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span>
    <span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>link</span> <span class="token attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">rel</span><span class="token attr-value" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span>shortcut icon<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span></span> <span class="token attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">href</span><span class="token attr-value" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span>#<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"</span></span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/&gt;</span></span>
  <span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;/</span>head</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span>
  <span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>body</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;/</span>body</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span>
<span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token tag" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;/</span>html</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span></span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Add this to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">src/lib.rs</code>:</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/lib.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> wasm_bindgen<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> Hello <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">impl</span> Component <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">for</span> Hello <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Message <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Properties <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">create</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>_<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> ComponentLink<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Self<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">update</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Message<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">change</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">view</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Html <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>span<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Hello World!"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>span<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token attribute attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(152, 104, 1);">#[wasm_bindgen(start)]</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">run_app</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    App<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Hello<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">new</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">mount_to_body</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Lot of things going on but you can see that we’re creating a new component named “Hello” that renders&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">&lt;span&gt;Hello World!&lt;/span&gt;</code>&nbsp;into the DOM. We’ll learn more about Yew components later.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Start the serve task in a new terminal and load&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">http://localhost:3000</code>&nbsp;in your browser</p><pre class=" language-shell" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-shell" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">$ cargo make serve</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/image-1.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 1476px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">It works!! It’s only “hello world” but this is fully written in Rust.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s learn about components and other SPA concepts before proceeding further.</p><h2 id="Thinking-in-Components" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#Thinking-in-Components" class="headerlink" title="Thinking in Components" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>Thinking in Components</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Building UIs by composing components and passing data in a unidirectional way is a paradigm shift in the frontend world. It’s a huge improvement in the way we reason about UI and it’s very hard to go back to imperative DOM manipulation once you get used to this.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">A&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Component</code>&nbsp;in libraries like React, Vue, Yew, Flutter etc have these features:</p><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Ability to be composed into bigger components</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Props</code>&nbsp;- Pass data and callbacks from that component to its child components.</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">State</code>&nbsp;- Manipulate state local to that component.</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">AppState</code>&nbsp;- Manipulate global state.</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Listen to lifecycle events like “Instantiated”, “Mounted in DOM” etc</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Perform side effects like fetching remote data, manipulating localstorage etc</li></ul><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">A component gets updated (re-rendered) when one of the following happens:</p><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Parent component is re-rendered</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Props</code>&nbsp;changes</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">State</code>&nbsp;changes</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">AppState</code>&nbsp;changes</li></ul><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">So, instead of imperatively updating the UI when user interaction, network requests etc happen, we update the data (Props, State, AppState) and the UI is updated based on this data. This what someone means when they say “UI is a function of state”.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">The exact details differ across different libraries but this should give you a general idea. If you’re new to this, this way of thinking might take sometime to “click” and get used to.</p><h2 id="HomePage" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#HomePage" class="headerlink" title="HomePage" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>HomePage</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s build the HomePage first. We’ll be building the HomePage as a monolithic component and later decompose it into smaller reusable components.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s create the following files:</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/pages/home.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> Home <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">impl</span> Component <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">for</span> Home <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Message <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Properties <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">create</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>_<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> ComponentLink<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Self<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">update</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Message<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">change</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">view</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Html <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>span<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Home Sweet Home!"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>span<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/pages/mod.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mod</span> home<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> home<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Home<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s update the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">src/lib.rs</code>&nbsp;to import the HomePage component:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/lib.rs
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ mod pages;</span>

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use pages::Home;</span>
  use wasm_bindgen::prelude::*;
  use yew::prelude::*;

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- struct Hello {}</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- impl Component for Hello {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     type Message = ();</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     type Properties = ();</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     fn create(_: Self::Properties, _: ComponentLink&lt;Self&gt;) -&gt; Self {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         Self {}</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     }</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     fn update(&amp;mut self, _: Self::Message) -&gt; ShouldRender {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         true</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     }</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     fn change(&amp;mut self, _: Self::Properties) -&gt; ShouldRender {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         true</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     }</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     fn view(&amp;self) -&gt; Html {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         html! { &lt;span&gt;{"Hello World!"}&lt;/span&gt; }</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     }</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- }</span>

  #[wasm_bindgen(start)]
  pub fn run_app() {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-   App::&lt;Hello&gt;::new().mount_to_body();</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+   App::&lt;Home&gt;::new().mount_to_body();</span>
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Now, you should see “Home Sweet Home!” instead of “Hello World!” rendered in your browser.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s start designing the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">State</code>&nbsp;of this component:</p><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We need to store a list of products retrieved from server</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Store the products the user has added to cart</li></ul><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We create a simple struct to hold the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Product</code>&nbsp;details:</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> Product <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    name<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> String<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    description<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> String<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    image<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> String<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    price<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> f64<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We then create a new struct&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">State</code>&nbsp;with field called&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">products</code>&nbsp;to hold the products from server:</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> State <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    products<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Vec<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Product<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Here’s the full list of changes in the HomePage component:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  use yew::prelude::*;

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ struct Product {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     id: i32,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     name: String,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     description: String,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     image: String,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     price: f64,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span>

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ struct State {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     products: Vec&lt;Product&gt;,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- pub struct Home {}</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ pub struct Home {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     state: State,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span>

  impl Component for Home {
      type Message = ();
      type Properties = ();

      fn create(_: Self::Properties, _: ComponentLink&lt;Self&gt;) -&gt; Self {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       let products: Vec&lt;Product&gt; = vec![</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           Product {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               id: 1,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               name: "Apple".to_string(),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               description: "An apple a day keeps the doctor away".to_string(),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               image: "/products/apple.png".to_string(),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               price: 3.65,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           },</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           Product {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               id: 2,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               name: "Banana".to_string(),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               description: "An old banana leaf was once young and green".to_string(),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               image: "/products/banana.png".to_string(),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               price: 7.99,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           },</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       ];</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-       Self {}</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       Self {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           state: State {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               products,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           },</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       }</span>
      }

      fn update(&amp;mut self, _: Self::Message) -&gt; ShouldRender {
          true
      }

      fn change(&amp;mut self, _: Self::Properties) -&gt; ShouldRender {
          true
      }

      fn view(&amp;self) -&gt; Html {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+        let products: Vec&lt;Html&gt; = self</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+            .state</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+            .products</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+            .iter()</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+            .map(|product: &amp;Product| {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                html! {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                  &lt;div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                    &lt;img src={&amp;product.image}/&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                    &lt;div&gt;{&amp;product.name}&lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                    &lt;div&gt;{"$"}{&amp;product.price}&lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                  &lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+            })</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+            .collect();</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+        html! { &lt;span&gt;{products}&lt;/span&gt; }</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-        html! { &lt;span&gt;{"Home!"}&lt;/span&gt; }</span>
      }
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">The&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">create</code>&nbsp;lifecycle method is invoked when the component is created and this is where we set the initial state. For the time being, we’ve created a mock list of products and assigned it to the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">products</code>&nbsp;inside the state as initial value. Later, we’ll fetch this list using network request.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">The&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">view</code>&nbsp;lifecycle method is invoked when the component is rendered. Here we’ve iterated over&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">products</code>&nbsp;inside state to generate product cards. If you’re familiar with React, this is same as the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">render</code>&nbsp;method and the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">html!</code>&nbsp;macro is similar to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">JSX</code>.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Save some random images as&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">static/products/apple.png</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">static/products/banana.png</code>&nbsp;and you’ll get this UI:</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/image-2.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 1476px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s implement the “add to cart” functionality:</p><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We keep track of all products added to cart in a new state field called&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">cart_products</code></li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We render a “add to cart” button for each product</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Add logic to update the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">cart_products</code>&nbsp;state when “add to cart” button is clicked</li></ul><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  use yew::prelude::*;

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ #[derive(Clone)]</span>
  struct Product {
      id: i32,
      name: String,
      description: String,
      image: String,
      price: f64,
  }

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ struct CartProduct {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     product: Product,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     quantity: i32,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span>

  struct State {
      products: Vec&lt;Product&gt;,
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     cart_products: Vec&lt;CartProduct&gt;,</span>
  }

  pub struct Home {
      state: State,
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     link: ComponentLink&lt;Self&gt;,</span>
  }

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ pub enum Msg {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     AddToCart(i32),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span>

  impl Component for Home {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-   type Message = ();</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+   type Message = Msg;</span>
    type Properties = ();

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-   fn create(_: Self::Properties, _: ComponentLink&lt;Self&gt;) -&gt; Self {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+   fn create(_: Self::Properties, link: ComponentLink&lt;Self&gt;) -&gt; Self {</span>
        let products: Vec&lt;Product&gt; = vec![
            Product {
                id: 1,
                name: "Apple".to_string(),
                description: "An apple a day keeps the doctor away".to_string(),
                image: "/products/apple.png".to_string(),
                price: 3.65,
            },
            Product {
                id: 2,
                name: "Banana".to_string(),
                description: "An old banana leaf was once young and green".to_string(),
                image: "/products/banana.png".to_string(),
                price: 7.99,
            },
        ];
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       let cart_products = vec![];</span>

        Self {
            state: State {
                products,
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               cart_products,</span>
            },
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           link,</span>
        }
    }

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-   fn update(&amp;mut self, _: Self::Message) -&gt; ShouldRender {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+   fn update(&amp;mut self, message: Self::Message) -&gt; ShouldRender {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       match message {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           Msg::AddToCart(product_id) =&gt; {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               let product = self</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   .state</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   .products</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   .iter()</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   .find(|p: &amp;&amp;Product| p.id == product_id)</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   .unwrap();</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               let cart_product = self</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   .state</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   .cart_products</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   .iter_mut()</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   .find(|cp: &amp;&amp;mut CartProduct| cp.product.id == product_id);</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               if let Some(cp) = cart_product {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   cp.quantity += 1;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               } else {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   self.state.cart_products.push(CartProduct {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                       product: product.clone(),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                       quantity: 1,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   })</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               true</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       }</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-       true</span>
    }

    fn change(&amp;mut self, _: Self::Properties) -&gt; ShouldRender {
        true
    }

    fn view(&amp;self) -&gt; Html {
        let products: Vec&lt;Html&gt; = self
            .state
            .products
            .iter()
            .map(|product: &amp;Product| {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+              let product_id = product.id;</span>
                html! {
                  &lt;div&gt;
                    &lt;img src={&amp;product.image}/&gt;
                    &lt;div&gt;{&amp;product.name}&lt;/div&gt;
                    &lt;div&gt;{"$"}{&amp;product.price}&lt;/div&gt;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   &lt;button onclick=self.link.callback(move |_| Msg::AddToCart(product_id))&gt;{"Add To Cart"}&lt;/button&gt;</span>
                  &lt;/div&gt;
                }
            })
            .collect();

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       let cart_value = self</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           .state</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           .cart_products</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           .iter()</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           .fold(0.0, |acc, cp| acc + (cp.quantity as f64 * cp.product.price));</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-       html! { &lt;span&gt;{products}&lt;/span&gt; }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       html! {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         &lt;div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           &lt;span&gt;{format!("Cart Value: {:.2}", cart_value)}&lt;/span&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+           &lt;span&gt;{products}&lt;/span&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         &lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+       }</span>
      }
  }
</code></pre><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">clone</code>&nbsp;- We’ve derived the&nbsp;<a href="https://doc.rust-lang.org/std/clone/trait.Clone.html" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Clone</code></a>&nbsp;trait in&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Product</code>&nbsp;struct so we can save the cloned&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Product</code>&nbsp;into&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">CartProduct</code>&nbsp;whenever the user adds them to cart.</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">update</code>&nbsp;- This method is the place where the logic to update the component&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">State</code>&nbsp;or perform side-effects (like network requests) exist. It is invoked using a&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Message</code>&nbsp;enum that contains all the actions the component supports. When we return&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">true</code>&nbsp;from this method, the component is re-rendered. In the above code, when the user clicks the “Add To Cart” button, we send a&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Msg::AddToCart</code>&nbsp;message to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">update</code>. Inside&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">update</code>, this either adds the product to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">cart_product</code>&nbsp;if it doesn’t exist or it increments the quantity.</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">link</code>&nbsp;- This allows us to register callbacks that can trigger our&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">update</code>&nbsp;lifecycle method.</li></ul><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">If you’ve used&nbsp;<a href="https://redux.js.org/" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Redux</a>&nbsp;before,&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">update</code>&nbsp;is similar to&nbsp;<a href="https://redux.js.org/basics/reducers" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Reducer</code></a>&nbsp;(for state updates) and&nbsp;<a href="https://redux.js.org/basics/actions#action-creators" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Action Creator</code></a>&nbsp;(for side-effects),&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Message</code>&nbsp;is similar to&nbsp;<a href="https://redux.js.org/basics/actions" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Action</code></a>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">link</code>&nbsp;is similar to&nbsp;<a href="https://redux.js.org/basics/store#dispatching-actions" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Dispatch</code></a>.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/rust-wasm-yew-single-page-application-2.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 1476px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Here’s how the UI looks like, try clicking the “Add To Cart” button and see the changes in “Cart Value”:</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/image-3.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 1476px;"></p><h2 id="Fetching-Data" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#Fetching-Data" class="headerlink" title="Fetching Data" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>Fetching Data</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We’ll move the product data from the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">create</code>&nbsp;function to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">static/products/products.json</code>&nbsp;and query it using the&nbsp;<a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">fetch</code></a>&nbsp;api.</p><pre class=" language-json" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-json" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">[</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"id"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token number" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"name"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Apple"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"description"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"An apple a day keeps the doctor away"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"image"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"/products/apple.png"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"price"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token number" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">3.65</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"id"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token number" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">2</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"name"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Banana"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"description"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"An old banana leaf was once young and green"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"image"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"/products/banana.png"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"price"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token number" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">7.99</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">]</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Yew exposes common browser apis like fetch, localstorage etc through something called&nbsp;<a href="https://docs.rs/yew/0.17.2/yew/services/index.html" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">“services”</a>. We can use the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">FetchService</code>&nbsp;to make network requests. It requires&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">anyhow</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">serde</code>&nbsp;crates, let’s install them:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  [package]
  name = "rustmart"
  version = "0.1.0"
  authors = ["sheshbabu &lt;sheshbabu@gmail.com&gt;"]
  edition = "2018"

  [lib]
  crate-type = ["cdylib", "rlib"]

  [dependencies]
  yew = "0.17"
  wasm-bindgen = "0.2"
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ anyhow = "1.0.32"</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ serde = { version = "1.0", features = ["derive"] }</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s extract the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Product</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">CartProduct</code>&nbsp;to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">src/types.rs</code>&nbsp;so we can share it across multiple files:</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> serde<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>Deserialize<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> Serialize<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token attribute attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(152, 104, 1);">#[derive(Deserialize, Serialize, Clone, Debug)]</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> Product <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> id<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> i32<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> name<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> String<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> description<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> String<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> image<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> String<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> price<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> f64<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token attribute attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(152, 104, 1);">#[derive(Clone, Debug)]</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> CartProduct <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> quantity<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> i32<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We’ve made both structs and their fields public, and have derived the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Deserialize</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Serialize</code>&nbsp;traits.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We’ll use the&nbsp;<a href="http://www.sheshbabu.com/posts/organizing-http-requests-using-api-module-pattern/" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">API module pattern</a>&nbsp;and create a separate module called&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">src/api.rs</code>&nbsp;to hold our fetch logic:</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/api.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">crate</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>types<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> anyhow<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Error<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>callback<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Callback<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>format<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>Json<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> Nothing<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>services<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>fetch<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>FetchService<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> FetchTask<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> Request<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> Response<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> FetchResponse<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>T<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Response<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Json<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Result<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>T<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> Error<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;&gt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> FetchCallback<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>T<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Callback<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>FetchResponse<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>T<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">get_products</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>callback<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> FetchCallback<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Vec<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Product<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> FetchTask <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">let</span> req <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Request<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">get</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"/products/products.json"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">body</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>Nothing<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">unwrap</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

    FetchService<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">fetch</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>req<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> callback<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">unwrap</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">The&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">FetchService</code>&nbsp;api is a bit awkward - it takes in a request object and callback as arguments and returns something called a “FetchTask”. One surprising gotcha here is that the network request gets aborted if this “FetchTask” is dropped. So we return this and store it in our component.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s update&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">lib.rs</code>&nbsp;to add these new modules into the&nbsp;<a href="http://www.sheshbabu.com/posts/rust-module-system/" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">module tree</a>:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/lib.rs
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ mod api;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ mod types;</span>
  mod pages;

  use pages::Home;
  use wasm_bindgen::prelude::*;
  use yew::prelude::*;

  #[wasm_bindgen(start)]
  pub fn run_app() {
      App::&lt;Home&gt;::new().mount_to_body();
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Finally, let’s update our HomePage component:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use crate::api;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use crate::types::{CartProduct, Product};</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use anyhow::Error;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use yew::format::Json;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use yew::services::fetch::FetchTask;</span>
  use yew::prelude::*;

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- #[derive(Clone)]</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- struct Product {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     id: i32,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     name: String,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     description: String,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     image: String,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     price: f64,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- }</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- struct CartProduct {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     product: Product,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     quantity: i32,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- }</span>

  struct State {
      products: Vec&lt;Product&gt;,
      cart_products: Vec&lt;CartProduct&gt;,
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     get_products_error: Option&lt;Error&gt;,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     get_products_loaded: bool,</span>
  }

  pub struct Home {
      state: State,
      link: ComponentLink&lt;Self&gt;,
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     task: Option&lt;FetchTask&gt;,</span>
  }

  pub enum Msg {
      AddToCart(i32),
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     GetProducts,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     GetProductsSuccess(Vec&lt;Product&gt;),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     GetProductsError(Error),</span>
  }

  impl Component for Home {
      type Message = Msg;
      type Properties = ();

      fn create(_: Self::Properties, link: ComponentLink&lt;Self&gt;) -&gt; Self {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         let products: Vec&lt;Product&gt; = vec![</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-             Product {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 id: 1,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 name: "Apple".to_string(),</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 description: "An apple a day keeps the doctor away".to_string(),</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 image: "/products/apple.png".to_string(),</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 price: 3.65,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-             },</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-             Product {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 id: 2,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 name: "Banana".to_string(),</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 description: "An old banana leaf was once young and green".to_string(),</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 image: "/products/banana.png".to_string(),</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 price: 7.99,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-             },</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         ];</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         let products = vec![];</span>
          let cart_products = vec![];

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         link.send_message(Msg::GetProducts);</span>

          Self {
              state: State {
                  products,
                  cart_products,
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 get_products_error: None,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 get_products_loaded: false,</span>
              },
              link,
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             task: None,</span>
          }
      }

      fn update(&amp;mut self, message: Self::Message) -&gt; ShouldRender {
          match message {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             Msg::GetProducts =&gt; {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 self.state.get_products_loaded = false;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 let handler =</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                     self.link</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                         .callback(move |response: api::FetchResponse&lt;Vec&lt;Product&gt;&gt;| {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                             let (_, Json(data)) = response.into_parts();</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                             match data {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                                 Ok(products) =&gt; Msg::GetProductsSuccess(products),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                                 Err(err) =&gt; Msg::GetProductsError(err),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                             }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                         });</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 self.task = Some(api::get_products(handler));</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 true</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             Msg::GetProductsSuccess(products) =&gt; {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 self.state.products = products;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 self.state.get_products_loaded = true;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 true</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             Msg::GetProductsError(error) =&gt; {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 self.state.get_products_error = Some(error);</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 self.state.get_products_loaded = true;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 true</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             }</span>
              Msg::AddToCart(product_id) =&gt; {
                  let product = self
                      .state
                      .products
                      .iter()
                      .find(|p: &amp;&amp;Product| p.id == product_id)
                      .unwrap();
                  let cart_product = self
                      .state
                      .cart_products
                      .iter_mut()
                      .find(|cp: &amp;&amp;mut CartProduct| cp.product.id == product_id);

                  if let Some(cp) = cart_product {
                      cp.quantity += 1;
                  } else {
                      self.state.cart_products.push(CartProduct {
                          product: product.clone(),
                          quantity: 1,
                      })
                  }
                  true
              }
          }
      }

      fn change(&amp;mut self, _: Self::Properties) -&gt; ShouldRender {
          true
      }

      fn view(&amp;self) -&gt; Html {
          let products: Vec&lt;Html&gt; = self
              .state
              .products
              .iter()
              .map(|product: &amp;Product| {
                  let product_id = product.id;
                  html! {
                    &lt;div&gt;
                      &lt;img src={&amp;product.image}/&gt;
                      &lt;div&gt;{&amp;product.name}&lt;/div&gt;
                      &lt;div&gt;{"$"}{&amp;product.price}&lt;/div&gt;
                      &lt;button onclick=self.link.callback(move |_| Msg::AddToCart(product_id))&gt;{"Add To Cart"}&lt;/button&gt;
                    &lt;/div&gt;
                  }
              })
              .collect();

          let cart_value = self
              .state
              .cart_products
              .iter()
              .fold(0.0, |acc, cp| acc + (cp.quantity as f64 * cp.product.price));

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         if !self.state.get_products_loaded {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             html! {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               &lt;div&gt;{"Loading ..."}&lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         } else if let Some(_) = self.state.get_products_error {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             html! {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               &lt;div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 &lt;span&gt;{"Error loading products! :("}&lt;/span&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+               &lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         } else {</span>
              html! {
                &lt;div&gt;
                  &lt;span&gt;{format!("Cart Value: {:.2}", cart_value)}&lt;/span&gt;
                  &lt;span&gt;{products}&lt;/span&gt;
                &lt;/div&gt;
              }
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         }</span>
      }
  }
</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Quite a number of changes, but you should be able to understand most of them.</p><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We’ve replaced the hardcoded products list in&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">create</code>&nbsp;with an empty array. We’re also sending a message&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Msg::GetProducts</code>&nbsp;to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">update</code>&nbsp;which calls the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">get_products</code>&nbsp;method in the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">api</code>&nbsp;module. The returned&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">FetchTask</code>&nbsp;is stored in&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">task</code>.</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">When the network request succeeds, the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Msg::GetProductsSuccess</code>&nbsp;message is called with products list or&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Msg::GetProductsError</code>&nbsp;with error.</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">These two messages set the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">products</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">get_products_error</code>&nbsp;fields in state respectively. They also set the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">get_products_loaded</code>&nbsp;state to true after the request is fulfilled.</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">In the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">view</code>&nbsp;method, we’ve used conditional rendering to render either the loading view, error view or products view based on the component’s state.</li></ul><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/rust-wasm-yew-single-page-application-3.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 1476px;"></p><h2 id="Splitting-into-reusable-components" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#Splitting-into-reusable-components" class="headerlink" title="Splitting into reusable components" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>Splitting into reusable components</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s extract the “product card” component into its own module so we can reuse it in other pages.</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/components/product_card.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">crate</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>types<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> ProductCard <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token attribute attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(152, 104, 1);">#[derive(Properties, Clone)]</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> Props <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> on_add_to_cart<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Callback<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">impl</span> Component <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">for</span> ProductCard <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Message <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Properties <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">create</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> ComponentLink<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Self<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span> props <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">update</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Message<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">change</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">view</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Html <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">let</span> onclick <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>on_add_to_cart<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">reform</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span>_<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

        <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
          <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
            <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>img src<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>image<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
            <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>name<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
            <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"$"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>price<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
            <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>button onclick<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span>onclick<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Add To Cart"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>button<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
          <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/components/mod.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mod</span> product_card<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> product_card<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>ProductCard<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span></code></pre><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/lib.rs
  mod api;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ mod components;</span>
  mod pages;
  mod types;

  // No changes</code></pre><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/pages/home.rs

  use crate::api;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use crate::components::ProductCard;</span>
  use crate::types::{CartProduct, Product};
  use anyhow::Error;
  use yew::format::Json;
  use yew::prelude::*;
  use yew::services::fetch::FetchTask;

  // No changes

  impl Component for Home {
      // No changes

      fn view(&amp;self) -&gt; Html {
          let products: Vec&lt;Html&gt; = self
              .state
              .products
              .iter()
              .map(|product: &amp;Product| {
                  let product_id = product.id;
                  html! {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                   &lt;div&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     &lt;img src={&amp;product.image}/&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     &lt;div&gt;{&amp;product.name}&lt;/div&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     &lt;div&gt;{"$"}{&amp;product.price}&lt;/div&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     &lt;button onclick=self.link.callback(move |_| Msg::AddToCart(product_id))&gt;{"Add To Cart"}&lt;/button&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                   &lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   &lt;ProductCard product={product} on_add_to_cart=self.link.callback(move |_| Msg::AddToCart(product_id))/&gt;</span>
                  }
              })
              .collect();

          // No changes
      }
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Pretty straightforward, except for&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Properties</code>,&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Callback</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">reform</code>.</p><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Properties</code>&nbsp;- As mentioned in the beginning of the post, “Properties” or “Props” are input to a component. If you think of components as functions, then Props are the function arguments.</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">For the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductCard</code>&nbsp;component, we’re passing the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Product</code>&nbsp;struct as well as a&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">on_add_to_cart</code>&nbsp;callback. This component doesn’t hold any state, so when user clicks on the “Add To Cart” button, this component calls the parent component to update the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">cart_products</code>&nbsp;state. This callback is represented using the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Callback&lt;T&gt;</code>&nbsp;type and to call this from child component, we either use&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">emit</code>&nbsp;or&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">reform</code>&nbsp;methods on the callback.</li></ul><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/rust-wasm-yew-single-page-application-4.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 1476px;"></p><h2 id="Styling" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#Styling" class="headerlink" title="Styling" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>Styling</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">The UI looks barebones as we haven’t added any styles.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/image-3.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 1476px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We can either use the&nbsp;<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">class attribute</a>&nbsp;or&nbsp;<a href="https://developer.mozilla.org/en-US/docs/Web/API/ElementCSSInlineStyle/style" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">inline styles</a>&nbsp;with Yew. Let’s add some styles so the UI looks good.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s create a new CSS file&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">static/styles.css</code>, add it to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">static/index.html</code>&nbsp;and then we can start using the classes in our components.</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/pages/home.rs

  html! {
    &lt;div&gt;
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     &lt;span&gt;{format!("Cart Value: {:.2}", cart_value)}&lt;/span&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     &lt;span&gt;{products}&lt;/span&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     &lt;div class="navbar"&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         &lt;div class="navbar_title"&gt;{"RustMart"}&lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         &lt;div class="navbar_cart_value"&gt;{format!("${:.2}", cart_value)}&lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     &lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     &lt;div class="product_card_list"&gt;{products}&lt;/div&gt;</span>
    &lt;/div&gt;
  }</code></pre><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/components/product_card.rs

  html! {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-   &lt;div&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     &lt;img src={&amp;self.props.product.image}/&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     &lt;div&gt;{&amp;self.props.product.name}&lt;/div&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     &lt;div&gt;{"$"}{&amp;self.props.product.price}&lt;/div&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     &lt;button onclick=onclick&gt;{"Add To Cart"}&lt;/button&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-   &lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+   &lt;div class="product_card_container"&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     &lt;img class="product_card_image" src={&amp;self.props.product.image}/&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     &lt;div class="product_card_name"&gt;{&amp;self.props.product.name}&lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     &lt;div class="product_card_price"&gt;{"$"}{&amp;self.props.product.price}&lt;/div&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     &lt;button class="product_atc_button" onclick=onclick&gt;{"Add To Cart"}&lt;/button&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+   &lt;/div&gt;</span>
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">After adding the styles and a few more products, here’s how the UI looks like:</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/image-4.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 0px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">CSS changes are outside the scope of this post, please refer to the&nbsp;<a href="https://github.com/sheshbabu/rustmart-yew-example" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">GitHub repo</a>.</p><h2 id="Routing" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#Routing" class="headerlink" title="Routing" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>Routing</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">In server rendered pages (Jinja, ERB, JSP etc), each page the user sees is mapped to a different template file. For example, when the user navigates to “/login”, it’s rendered in server using “login.html” and when the user goes to “/settings”, it’s rendered using “settings.html”. Using unique urls for different UI pages is also useful for bookmarking and sharing.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Since SPAs only have one html page (the “Single Page” in SPA), we should be able to replicate the above behavior. This is done using a&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Router</code>. A Router maps different url paths (with query params, fragments etc) to different page components and helps in navigating between multiple pages without reloading.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">For our application, we’ll be using this mapping:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">/            =&gt; HomePage
/product/:id =&gt; ProductDetailPage</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s install&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">yew-router</code>:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  [package]
  name = "rustmart"
  version = "0.1.0"
  authors = ["sheshbabu &lt;sheshbabu@gmail.com&gt;"]
  edition = "2018"

  [lib]
  crate-type = ["cdylib", "rlib"]

  [dependencies]
  yew = "0.17"
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ yew-router = "0.14.0"</span>
  wasm-bindgen = "0.2"
  log = "0.4.6"
  wasm-logger = "0.2.0"
  anyhow = "1.0.32"
  serde = { version = "1.0", features = ["derive"] }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s add the routes in a dedicated file so it’s easier to see all available routes at a glance:</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/route.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew_router<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token attribute attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(152, 104, 1);">#[derive(Switch, Debug, Clone)]</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">enum</span> Route <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    #<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">[</span>to <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"/"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">]</span>
    HomePage<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">For the time being, it only has one route. We’ll add more later.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s create a new file called&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">src/app.rs</code>&nbsp;to replace&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">HomePage</code>&nbsp;as the new root component:</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew_router<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">crate</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>pages<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Home<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">crate</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>route<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Route<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> App <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">impl</span> Component <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">for</span> App <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Message <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Properties <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">create</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>_<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> ComponentLink<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Self<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">update</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Message<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">change</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">false</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">view</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Html <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">let</span> render <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Router<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">render</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span>switch<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Route<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">match</span> switch <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
            Route<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>HomePage <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Home<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

        <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
            <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Router<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Route<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> render<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span>render<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s make the corresponding change in&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">lib.rs</code>:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  mod api;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ mod app;</span>
  mod components;
  mod pages;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ mod route;</span>
  mod types;

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- use pages::Home;</span>
  use wasm_bindgen::prelude::*;
  use yew::prelude::*;

  #[wasm_bindgen(start)]
  pub fn run_app() {
      wasm_logger::init(wasm_logger::Config::default());
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     App::&lt;Home&gt;::new().mount_to_body();</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     App::&lt;app::App&gt;::new().mount_to_body();</span>
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">This is how our component hierarchy looks like so far:</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/rust-wasm-yew-single-page-application-5.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 1476px;"></p><h2 id="ProductDetailPage" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#ProductDetailPage" class="headerlink" title="ProductDetailPage" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>ProductDetailPage</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Now that we have a router in place, let’s use it to navigate from one page to another. Since it’s a SPA, we should avoid page reload while navigating.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s add a route for ProductDetailPage under&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">/product/:id</code>. When the user clicks on a&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductCard</code>, it will go to its detail page with the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">id</code>&nbsp;in the route passed as a Prop.</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/route.rs
  use yew_router::prelude::*;

  #[derive(Switch, Debug, Clone)]
  pub enum Route {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     #[to = "/product/{id}"]</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     ProductDetail(i32),</span>
      #[to = "/"]
      HomePage,
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Note that the order of the routes above determines which page gets rendered first. For example, the url&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">/product/2</code>&nbsp;matches both&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">/product/{id}</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">/</code>&nbsp;but since we wrote&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">/product/{id}</code>&nbsp;first, the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductDetail</code>&nbsp;page gets rendered instead of&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Home</code>.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Add this route to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">app.rs</code>:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  use yew::prelude::*;
  use yew_router::prelude::*;

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- use crate::pages::{Home};</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use crate::pages::{Home, ProductDetail};</span>
  use crate::route::Route;

  pub struct App {}

  impl Component for App {
      // No changes

      fn view(&amp;self) -&gt; Html {
          let render = Router::render(|switch: Route| match switch {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             Route::ProductDetail(id) =&gt; html! {&lt;ProductDetail id=id/&gt;},</span>
              Route::HomePage =&gt; html! {&lt;Home/&gt;},
          });

          html! {
              &lt;Router&lt;Route, ()&gt; render=render/&gt;
          }
      }
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s update the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductCard</code>&nbsp;so clicking on the product image, name or price takes us to this new page:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/components/product_card.rs
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use crate::route::Route;</span>
  use crate::types::Product;
  use yew::prelude::*;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use yew_router::components::RouterAnchor;</span>

  // No changes

  impl Component for ProductCard {
      // No changes

      fn view(&amp;self) -&gt; Html {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         type Anchor = RouterAnchor&lt;Route&gt;;</span>
          let onclick = self.props.on_add_to_cart.reform(|_| ());

          html! {
              &lt;div class="product_card_container"&gt;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 &lt;Anchor route=Route::ProductDetail(self.props.product.id) classes="product_card_anchor"&gt;</span>
                      &lt;img class="product_card_image" src={&amp;self.props.product.image}/&gt;
                      &lt;div class="product_card_name"&gt;{&amp;self.props.product.name}&lt;/div&gt;
                      &lt;div class="product_card_price"&gt;{"$"}{&amp;self.props.product.price}&lt;/div&gt;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 &lt;/Anchor&gt;</span>
                  &lt;button class="product_atc_button" onclick=onclick&gt;{"Add To Cart"}&lt;/button&gt;
              &lt;/div&gt;
          }
      }
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Notice how we used&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">classes</code>&nbsp;instead of&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">class</code>&nbsp;for&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Anchor</code>.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We’ll create files named&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">static/products/1.json</code>,&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">static/products/2.json</code>&nbsp;etc with mock data:</p><pre class=" language-json" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-json" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
  <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"id"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token number" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
  <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"name"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Apple"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
  <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"description"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"An apple a day keeps the doctor away"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
  <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"image"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"/products/apple.png"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
  <span class="token property" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">"price"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token number" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">3.65</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s update the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">api.rs</code>&nbsp;module with the new route:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  use crate::types::Product;
  use anyhow::Error;
  use yew::callback::Callback;
  use yew::format::{Json, Nothing};
  use yew::services::fetch::{FetchService, FetchTask, Request, Response};

  pub type FetchResponse&lt;T&gt; = Response&lt;Json&lt;Result&lt;T, Error&gt;&gt;&gt;;
  type FetchCallback&lt;T&gt; = Callback&lt;FetchResponse&lt;T&gt;&gt;;

  pub fn get_products(callback: FetchCallback&lt;Vec&lt;Product&gt;&gt;) -&gt; FetchTask {
      let req = Request::get("/products/products.json")
          .body(Nothing)
          .unwrap();

      FetchService::fetch(req, callback).unwrap()
  }

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ pub fn get_product(id: i32, callback: FetchCallback&lt;Product&gt;) -&gt; FetchTask {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     let req = Request::get(format!("/products/{}.json", id))</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         .body(Nothing)</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         .unwrap();</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     FetchService::fetch(req, callback).unwrap()</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Finally, here’s the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductDetail</code>&nbsp;page component:</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/pages/product_detail.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">crate</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>api<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">crate</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>types<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> anyhow<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Error<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>format<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Json<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>services<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>fetch<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>FetchTask<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> State <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Option<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Product<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    get_product_error<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Option<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Error<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    get_product_loaded<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> bool<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> ProductDetail <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    state<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> State<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> ComponentLink<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Self<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    task<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Option<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>FetchTask<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token attribute attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(152, 104, 1);">#[derive(Properties, Clone)]</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> Props <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> id<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> i32<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">enum</span> Msg <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    GetProduct<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">GetProductSuccess</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>Product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">GetProductError</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>Error<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">impl</span> Component <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">for</span> ProductDetail <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Message <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Properties <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">create</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> ComponentLink<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Self<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">send_message</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>GetProduct<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

        Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
            props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
            state<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> State <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
                product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> None<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
                get_product_error<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> None<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
                get_product_loaded<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">false</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
            link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
            task<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> None<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">update</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> message<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Message<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">match</span> message <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
            Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>GetProduct <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
                <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">let</span> handler <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span>
                    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>link
                    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">callback</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">move</span> <span class="token closure-params" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span>response<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> api<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>FetchResponse&lt;Product&gt;<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span></span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
                        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">let</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>_<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Json</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>data<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> response<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">into_parts</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
                        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">match</span> data <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
                            <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Ok</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">GetProductSuccess</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
                            <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Err</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>err<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">GetProductError</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>err<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
                        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
                    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

                <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>task <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Some</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>api<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">get_product</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>id<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> handler<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
                <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
            Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">GetProductSuccess</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
                <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>state<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>product <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Some</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
                <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>state<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>get_product_loaded <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
                <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
            Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">GetProductError</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>error<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
                <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>state<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>get_product_error <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Some</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>error<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
                <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>state<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>get_product_loaded <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
                <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">change</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">false</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">view</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Html <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">if</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">let</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Some</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">ref</span> product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>state<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>product <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
            <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
                <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"product_detail_container"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                    <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>img class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"product_detail_image"</span> src<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>image<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                    <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"product_card_name"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>name<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                    <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div style<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"margin: 10px 0; line-height: 24px;"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>description<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                    <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"product_card_price"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"$"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>price<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                    <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>button class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"product_atc_button"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Add To Cart"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>button<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">else</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">if</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">!</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>state<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>get_product_loaded <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
            <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
                <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"loading_spinner_container"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                    <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"loading_spinner"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                    <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"loading_spinner_text"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Loading ..."</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">else</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
            <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
                <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                    <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>span<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Error loading product! :("</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>span<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Very similar to the HomePage component. Let’s also add this file to the module tree:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/pages/mod.rs
  mod home;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ mod product_detail;</span>

  pub use home::Home;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ pub use product_detail::ProductDetail;</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">This is how it looks like:</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/image-5.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 0px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We can now move between multiple pages without refreshing the page!</p><h2 id="State-Management" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#State-Management" class="headerlink" title="State Management" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>State Management</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">One thing you might have noticed in the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductDetail</code>&nbsp;page is that clicking on the “Add To Cart” button doesn’t update the cart. This is because the state that holds the list of products in cart&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">cart_products</code>&nbsp;currently resides inside&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Home</code>&nbsp;page component:<br style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/rust-wasm-yew-single-page-application-6.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 0px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">To share state between two components, we can either:</p><ul style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Hoist the state to a common ancestor</li><li style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Move state to global app state</li></ul><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">The&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">App</code>&nbsp;component is a common ancestor to both&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductDetail</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Home</code>. We can move the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">cart_products</code>&nbsp;state there and pass it as props to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductDetail</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Home</code>.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/rust-wasm-yew-single-page-application-7.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 0px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">This works fine for shallow component hierarchies but when you have deep component hierarchy (which is common in larger SPAs), you’ll need to pass this state through multiple layers of components (which might not have use for this prop) to reach the desired node. This is called “Prop Drilling”.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">You can see that&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">cart_products</code>&nbsp;is now passed from&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">App</code>&nbsp;to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">AddToCart</code>&nbsp;component via&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductDetail</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Home</code>&nbsp;even though they have no use for this state. Imagine the same scenario with components many layers deep.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">This is the problem the global state solves. Here’s how it would look like:</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/rust-wasm-yew-single-page-application-8.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 0px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Notice how there’s a direct link between the components that need this state and the global state.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Unfortunately, Yew doesn’t seem to have a&nbsp;<a href="https://github.com/yewstack/yew/issues/576" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">good solution</a>&nbsp;for this. The recommended solution is to use&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Agents</code>&nbsp;for broadcasting state changes via pubsub. This is something I stay away from as it gets messy fast. I hope in future we see something similar to React’s&nbsp;<a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Context</a>, Redux or Mobx etc.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Let’s solve our problem by hoisting the state.</p><h2 id="Hoisting-State" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#Hoisting-State" class="headerlink" title="Hoisting State" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>Hoisting State</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We’ll be refactoring our code by moving&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">cart_products</code>&nbsp;state to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">App</code>&nbsp;and extracting&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Navbar</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">AtcButton</code>&nbsp;as separate components:</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/rust-wasm-yew-single-page-application-9.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 0px;"></p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/components/navbar.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">crate</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>types<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>CartProduct<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> Navbar <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token attribute attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(152, 104, 1);">#[derive(Properties, Clone)]</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> Props <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> cart_products<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Vec<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>CartProduct<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">impl</span> Component <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">for</span> Navbar <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Message <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Properties <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">create</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> ComponentLink<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Self<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span> props <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">update</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> _msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Message<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">change</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">view</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Html <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">let</span> cart_value <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span>
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>cart_products
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">iter</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span>
            <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">fold</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token number" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">0.0</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span>acc<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> cp<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span> acc <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">+</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>cp<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>quantity <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">as</span> f64 <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span> cp<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>price<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

        <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
            <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"navbar"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
                <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"navbar_title"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"RustMart"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
              <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>div class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"navbar_cart_value"</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">format!</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"${:.2}"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> cart_value<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
            <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>div<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Notice how we started using the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">change</code>&nbsp;lifecycle methods in the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Navbar</code>&nbsp;component. When the props sent from parent changes, we need to update the props inside the component so the UI re-renders.</p><pre class=" language-rust" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-rust" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(160, 161, 167); font-style: italic;">// src/components/atc_button.rs</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">crate</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>types<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">use</span> yew<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>prelude<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">*</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> AtcButton <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> ComponentLink<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Self<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token attribute attr-name" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(152, 104, 1);">#[derive(Properties, Clone)]</span>
<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">struct</span> Props <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> on_add_to_cart<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Callback<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Product<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">pub</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">enum</span> Msg <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    AddToCart<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">impl</span> Component <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">for</span> AtcButton <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Message <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">type</span> Properties <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> Props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">create</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> ComponentLink<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>Self<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        Self <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span> props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> link <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">update</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Message<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">match</span> msg <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
            Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>AddToCart <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>on_add_to_cart<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">emit</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>product<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">clone</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">change</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">mut</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">,</span> props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span> Self<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>Properties<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> ShouldRender <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>props <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> props<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">true</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>

    <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">fn</span> <span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">view</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&amp;</span><span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">-&gt;</span> Html <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">let</span> onclick <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(166, 38, 164);">self</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span>link<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">.</span><span class="token function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">callback</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">(</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span>_<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">|</span> Msg<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">:</span>AddToCart<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">;</span>

        <span class="token macro-rules function" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">html!</span> <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span>
          <span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span>button class<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"product_atc_button"</span> onclick<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">=</span>onclick<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">{</span><span class="token string" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">"Add To Cart"</span><span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&lt;</span><span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">/</span>button<span class="token operator" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">&gt;</span>
        <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">}</span></code></pre><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/components/mod.rs
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ mod atc_button;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ mod navbar;</span>
  mod product_card;

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ pub use atc_button::AtcButton;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ pub use navbar::Navbar;</span>
  pub use product_card::ProductCard;</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Use the new&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">AtcButton</code>&nbsp;in&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductCard</code>&nbsp;and&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductDetail</code>:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/components/product_card.rs
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use crate::components::AtcButton;</span>
  use crate::route::Route;
  use crate::types::Product;
  use yew::prelude::*;
  use yew_router::components::RouterAnchor;

  pub struct ProductCard {
      props: Props,
  }

  #[derive(Properties, Clone)]
  pub struct Props {
      pub product: Product,
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     pub on_add_to_cart: Callback&lt;()&gt;,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     pub on_add_to_cart: Callback&lt;Product&gt;,</span>
  }

  impl Component for ProductCard {
      // No changes

      fn view(&amp;self) -&gt; Html {
          type Anchor = RouterAnchor&lt;Route&gt;;
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         let onclick = self.props.on_add_to_cart.reform(|_| ());</span>

          html! {
              &lt;div class="product_card_container"&gt;
                  &lt;Anchor route=Route::ProductDetail(self.props.product.id) classes="product_card_anchor"&gt;
                      &lt;img class="product_card_image" src={&amp;self.props.product.image}/&gt;
                      &lt;div class="product_card_name"&gt;{&amp;self.props.product.name}&lt;/div&gt;
                      &lt;div class="product_card_price"&gt;{"$"}{&amp;self.props.product.price}&lt;/div&gt;
                  &lt;/Anchor&gt;
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 &lt;button class="product_atc_button" onclick=onclick&gt;{"Add To Cart"}&lt;/button&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 &lt;AtcButton product=self.props.product.clone() on_add_to_cart=self.props.on_add_to_cart.clone() /&gt;</span>
              &lt;/div&gt;
          }
      }
  }</code></pre><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/pages/product_detail.rs
  use crate::api;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use crate::components::AtcButton;</span>
  use crate::types::Product;
  use anyhow::Error;
  use yew::format::Json;
  use yew::prelude::*;
  use yew::services::fetch::FetchTask;

  // No changes

  #[derive(Properties, Clone)]
  pub struct Props {
      pub id: i32,
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     pub on_add_to_cart: Callback&lt;Product&gt;,</span>
  }

  impl Component for ProductDetail {
      // No changes

      fn view(&amp;self) -&gt; Html {
          if let Some(ref product) = self.state.product {
              html! {
                  &lt;div class="product_detail_container"&gt;
                      &lt;img class="product_detail_image" src={&amp;product.image}/&gt;
                      &lt;div class="product_card_name"&gt;{&amp;product.name}&lt;/div&gt;
                      &lt;div style="margin: 10px 0; line-height: 24px;"&gt;{&amp;product.description}&lt;/div&gt;
                      &lt;div class="product_card_price"&gt;{"$"}{&amp;product.price}&lt;/div&gt;
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     &lt;button class="product_atc_button"&gt;{"Add To Cart"}&lt;/button&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                     &lt;AtcButton product=product.clone() on_add_to_cart=self.props.on_add_to_cart.clone() /&gt;</span>
                  &lt;/div&gt;
              }
          }

          // No changes
      }
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Finally, move the&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">cart_products</code>&nbsp;state from&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Home</code>&nbsp;to&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">App</code>:</p><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/app.rs
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use crate::components::Navbar;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ use crate::types::{CartProduct, Product};</span>
  use yew::prelude::*;
  use yew_router::prelude::*;

  use crate::pages::{Home, ProductDetail};
  use crate::route::Route;

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ struct State {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     cart_products: Vec&lt;CartProduct&gt;,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">- pub struct App {}</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ pub struct App {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     state: State,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     link: ComponentLink&lt;Self&gt;,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span>

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ pub enum Msg {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     AddToCart(Product),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span>

  impl Component for App {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     type Message = ();</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     type Message = Msg;</span>
      type Properties = ();

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     fn create(_: Self::Properties, _link: ComponentLink&lt;Self&gt;) -&gt; Self {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     fn create(_: Self::Properties, link: ComponentLink&lt;Self&gt;) -&gt; Self {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         let cart_products = vec![];</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         Self {}</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         Self {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             state: State { cart_products },</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             link,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         }</span>
      }

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     fn update(&amp;mut self, _msg: Self::Message) -&gt; ShouldRender {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     fn update(&amp;mut self, message: Self::Message) -&gt; ShouldRender {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         match message {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             Msg::AddToCart(product) =&gt; {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 let cart_product = self</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                     .state</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                     .cart_products</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                     .iter_mut()</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                     .find(|cp: &amp;&amp;mut CartProduct| cp.product.id == product.id);</span>

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 if let Some(cp) = cart_product {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                     cp.quantity += 1;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 } else {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                     self.state.cart_products.push(CartProduct {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                         product: product.clone(),</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                         quantity: 1,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                     })</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 true</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         }</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         true</span>
      }

      fn change(&amp;mut self, _: Self::Properties) -&gt; ShouldRender {
          false
      }

      fn view(&amp;self) -&gt; Html {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         let handle_add_to_cart = self</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             .link</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             .callback(|product: Product| Msg::AddToCart(product));</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         let cart_products = self.state.cart_products.clone();</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         let render = Router::render(|switch: Route| match switch {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-           Route::ProductDetail(id) =&gt; html! {&lt;ProductDetail id=id/&gt;},</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-           Route::HomePage =&gt; html! {&lt;Home/&gt;},</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         let render = Router::render(move |switch: Route| match switch {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             Route::ProductDetail(id) =&gt; {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 html! {&lt;ProductDetail id=id on_add_to_cart=handle_add_to_cart.clone() /&gt;}</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             }</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             Route::HomePage =&gt; {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 html! {&lt;Home cart_products=cart_products.clone() on_add_to_cart=handle_add_to_cart.clone()/&gt;}</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             }</span>
          });

          html! {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             &lt;&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                 &lt;Navbar cart_products=self.state.cart_products.clone() /&gt;</span>
                  &lt;Router&lt;Route, ()&gt; render=render/&gt;
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+             &lt;/&gt;</span>
          }
      }
  }</code></pre><pre class=" language-diff" style="margin-top: 15px; margin-bottom: 0px; padding: 7px 15px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font); background: rgb(250, 250, 250); overflow: auto; position: relative; font-size: 14px; border-radius: 4px;"><code class="language-diff" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">  // src/pages/home.rs
  // No changes

  struct State {
      products: Vec&lt;Product&gt;,
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     cart_products: Vec&lt;CartProduct&gt;,</span>
      get_products_error: Option&lt;Error&gt;,
      get_products_loaded: bool,
  }

<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ #[derive(Properties, Clone)]</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ pub struct Props {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     pub cart_products: Vec&lt;CartProduct&gt;,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     pub on_add_to_cart: Callback&lt;Product&gt;,</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+ }</span>

  pub struct Home {
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     props: Props,</span>
      state: State,
      link: ComponentLink&lt;Self&gt;,
      task: Option&lt;FetchTask&gt;,
  }

  pub enum Msg {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     AddToCart(i32),</span>
      GetProducts,
      GetProductsSuccess(Vec&lt;Product&gt;),
      GetProductsError(Error),
  }

  impl Component for Home {
      type Message = Msg;
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     type Properties = ();</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     type Properties = Props;</span>

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     fn create(_: Self::Properties, link: ComponentLink&lt;Self&gt;) -&gt; Self {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     fn create(props: Self::Properties, link: ComponentLink&lt;Self&gt;) -&gt; Self {</span>
          let products = vec![];
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-         let cart_products = vec![];</span>

          link.send_message(Msg::GetProducts);

          Self {
              props,
              state: State {
                  products,
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 cart_products,</span>
                  get_products_error: None,
                  get_products_loaded: false,
              },
              link,
              task: None,
          }
      }

      fn update(&amp;mut self, message: Self::Message) -&gt; ShouldRender {
          match message {
              Msg::GetProducts =&gt; {
                  self.state.get_products_loaded = false;
                  let handler =
                      self.link
                          .callback(move |response: api::FetchResponse&lt;Vec&lt;Product&gt;&gt;| {
                              let (_, Json(data)) = response.into_parts();
                              match data {
                                  Ok(products) =&gt; Msg::GetProductsSuccess(products),
                                  Err(err) =&gt; Msg::GetProductsError(err),
                              }
                          });

                  self.task = Some(api::get_products(handler));
                  true
              }
              Msg::GetProductsSuccess(products) =&gt; {
                  self.state.products = products;
                  self.state.get_products_loaded = true;
                  true
              }
              Msg::GetProductsError(error) =&gt; {
                  self.state.get_products_error = Some(error);
                  self.state.get_products_loaded = true;
                  true
              }
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-             Msg::AddToCart(product_id) =&gt; {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 let product = self</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     .state</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     .products</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     .iter()</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     .find(|p: &amp;&amp;Product| p.id == product_id)</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     .unwrap();</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 let cart_product = self</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     .state</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     .cart_products</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     .iter_mut()</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     .find(|cp: &amp;&amp;mut CartProduct| cp.product.id == product_id);</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 if let Some(cp) = cart_product {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     cp.quantity += 1;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 } else {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     self.state.cart_products.push(CartProduct {</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                         product: product.clone(),</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                         quantity: 1,</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     })</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 }</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 true</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-             }</span>
          }
      }

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-     fn change(&amp;mut self, _: Self::Properties) -&gt; ShouldRender {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+     fn change(&amp;mut self, props: Self::Properties) -&gt; ShouldRender {</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+         self.props = props;</span>
          true
      }

      fn view(&amp;self) -&gt; Html {
          let products: Vec&lt;Html&gt; = self
              .state
              .products
              .iter()
              .map(|product: &amp;Product| {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 let product_id = product.id;</span>
                  html! {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                   &lt;ProductCard product={product} on_add_to_cart=self.link.callback(move |_| Msg::AddToCart(product_id))/&gt;</span>
<span class="token inserted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(80, 161, 79);">+                   &lt;ProductCard product={product} on_add_to_cart=self.props.on_add_to_cart.clone()/&gt;</span>
                  }
              })
              .collect();

<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-        let cart_value = self</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-            .state</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-            .cart_products</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-            .iter()</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-            .fold(0.0, |acc, cp| acc + (cp.quantity as f64 * cp.product.price));</span>

          if !self.state.get_products_loaded {
              // No changes
          } else if let Some(_) = self.state.get_products_error {
              // No changes
          } else {
              html! {
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-               &lt;div&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 &lt;div class="navbar"&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     &lt;div class="navbar_title"&gt;{"RustMart"}&lt;/div&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                     &lt;div class="navbar_cart_value"&gt;{format!("${:.2}", cart_value)}&lt;/div&gt;</span>
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-                 &lt;/div&gt;</span>
                  &lt;div class="product_card_list"&gt;{products}&lt;/div&gt;
<span class="token deleted" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; color: rgb(220, 50, 47);">-               &lt;/div&gt;</span>
              }
          }
      }
  }</code></pre><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Now we can finally add to cart from&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">ProductDetail</code>&nbsp;page and we can also see the navbar in all pages</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/image-6.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 0px;"><br style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><img src="./rustmart_example_yew_files/image-4.png" alt="" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; width: 0px;"></p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">We’ve successfully built a SPA fully in Rust!</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">I’ve hosted the demo&nbsp;<a href="https://rustmart-yew.netlify.app/" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">here</a>&nbsp;and the code is in this&nbsp;<a href="https://github.com/sheshbabu/rustmart-yew-example" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">GitHub repo</a>. If you have questions or suggestions, please contact me at sheshbabu [at] gmail.com.</p><h2 id="Conclusion" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; line-height: 1.6; font-size: 24px;"><a href="https://www.sheshbabu.com/posts/rust-wasm-yew-single-page-application/#Conclusion" class="headerlink" title="Conclusion" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></a>Conclusion</h2><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">The Yew community has done a good job designing abstractions like&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">html!</code>,&nbsp;<code style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none; font-family: var(--mono-font);">Component</code>&nbsp;etc so someone like me who’s familiar with React can immediately start being productive. It definitely has some rough edges like FetchTask, lack of&nbsp;<a href="https://redux.js.org/introduction/motivation" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;"><em style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">predictable</em></a>&nbsp;state management and the documentation is sparse, but has potential to become a good alternative to React, Vue etc once these issues are fixed.</p><p style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Thanks for reading! Feel free to follow me in&nbsp;<a href="https://twitter.com/sheshbabu" target="_blank" rel="noopener" style="margin: 0px; padding: 0px; box-sizing: border-box; text-size-adjust: none;">Twitter</a>&nbsp;for more posts like this :)</p><div><br></div></div><header id="header" style="margin: 30px auto; padding: 0px; box-sizing: border-box; text-size-adjust: none;"></header></div></body></html>